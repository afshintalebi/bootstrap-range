if("undefined"==typeof jQuery)throw new Error("BootstrapRange's JavaScript requires jQuery");!function(t){if(void 0===t.fn.popover)throw new Error("BootstrapRange's JavaScript requires Bootstrap Popover plugin")}(jQuery),function(t){"use strict";function e(e){return this.each(function(){e=t.extend(a.DEFAULTS,e);var i=new a(this,e);i.setCssClass(),i.readonly(),i.createPopover(),i.setTargetEvents()})}var a=function(e,a){this.target=t(e),this.options=a,this.classObj=null,this.minimumItemValue=null,this.maximumItemValue=null,this.popoverObj=null,this.minObj=null,this.maxObj=null,this.leftItemsObj=null,this.rightItemsObj=null,this.minOldVal="",this.minNewVal="",this.maxOldVal="",this.maxNewVal=""};a.DEFAULTS={cssClass:"at-bootstrap-range",minValues:[],maxValues:[],minPlaceholder:"Minimum",maxPlaceholder:"Maximum",minAttribute:"data-minimum",maxAttribute:"data-maximum",minHintText:"from",maxHintText:"to",readonly:!0,format:!0,minimumCallback:function(t){},maximumCallback:function(t){}},a.isNumber=function(e){-1!==t.inArray(e.keyCode,[46,8,9,27,13,110,190])||65==e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||67==e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||88==e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||e.keyCode>=35&&e.keyCode<=39||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()},a.prototype.format=function(t,e,a){if(this.options.format){var i="\\d(?=(\\d{"+(a||3)+"})+"+(e>0?"\\.":"$")+")";t=parseInt(t),t=t.toFixed(Math.max(0,~~e)).replace(new RegExp(i,"g"),"$&,")}return t},a.isPopoverExists=function(t){return t.next(".popover").length>0},a.prototype.setCssClass=function(){var t=this;t.target.addClass(t.options.cssClass)},a.prototype.readonly=function(){var t=this;t.options.readonly&&t.target.prop("readonly",!0)},a.prototype.createPopover=function(){var t=this,e=t.options;t.target.popover({html:!0,placement:"bottom",trigger:"manual",content:function(){var a="",i="";a+='<ul class="list-unstyled">';for(var m=0;m<e.minValues.length;m++)a+='<li data-value="'+e.minValues[m]+'">'+t.format(e.minValues[m])+"</li>";a+="</ul>",i+='<ul class="list-unstyled">';for(var m=0;m<e.maxValues.length;m++)i+='<li data-value="'+e.maxValues[m]+'">'+t.format(e.maxValues[m])+"</li>";return i+="</ul>",'<div class="bootstrap-range"><div class="right-column"><div class="input-container"><input type="text" name="maximum" tabindex="3" class="maximum" placeholder="'+e.maxPlaceholder+'"></div><div class="list-items maximum-items">'+i+'</div></div><div class="left-column"><div class="input-container"><input type="text" name="minimum" tabindex="2" class="minimum" placeholder="'+e.minPlaceholder+'"></div><div class="list-items minimum-items">'+a+"</div></div></div>"}}).on("shown.bs.popover",function(){t.initialize(),t.popoverObj.click(function(t){t.stopPropagation()})})},a.prototype.setTargetEvents=function(){var e=this,i=e.target;i.on("focus",function(m){m.stopPropagation(),a.isPopoverExists(i)||(t("."+e.options.cssClass).not(i).popover("hide"),i.popover("show"))}),t(document).add("[data-toggle='dropdown']").click(function(a){t("."+e.options.cssClass).popover("hide")}),i.click(function(t){t.stopPropagation()})},a.prototype.initialize=function(){var e,a,i,m=this,n=m.target;e=m.popoverObj=n.next(".popover"),a=m.minObj=e.find(".input-container input.minimum"),i=m.maxObj=e.find(".input-container input.maximum"),m.leftItemsObj=e.find(".left-column .list-items"),m.rightItemsObj=e.find(".right-column .list-items"),n.attr("tabindex","1"),m.getMinimum()&&(m.minimumItemValue=m.getMinimum(),a.val(m.format(m.minimumItemValue))),m.getMaximum()&&(m.maximumItemValue=m.getMaximum(),i.val(m.format(m.maximumItemValue))),a.focus(),e.find(".minimum-items > ul > li").on("click",t.proxy(m.minItemsClickHandler,m)),e.find(".maximum-items > ul > li").on("click",t.proxy(m.maxItemsClickHandler,m)),a.on("focus",function(){m.hideListItems("right")}).on("blur",function(){m.showListItems("right")}).trigger("focus"),i.on("focus",function(){m.hideListItems("left")}).on("blur",function(){m.showListItems("left")}),m.setMinEvents(),m.setMaxEvents(),m.disableMaxLowerValues()},a.prototype.getMinimum=function(){var t=this;return t.target.attr(t.options.minAttribute)},a.prototype.getMaximum=function(){var t=this;return t.target.attr(t.options.maxAttribute)},a.prototype.setMinimum=function(t){var e=this;e.target.attr(e.options.minAttribute,t)},a.prototype.setMaximum=function(t){var e=this;e.target.attr(e.options.maxAttribute,t)},a.prototype.checkMaxValue=function(){var t=this,e=t.maxObj,a=isNaN(t.maximumItemValue)?void 0:parseInt(t.maximumItemValue),i=parseInt(t.minimumItemValue);a>=0&&i>a&&(e.val(""),t.maximumItemValue=void 0,t.removeMaximum())},a.prototype.removeMaximum=function(){var t=this;t.target.removeAttr(t.options.maxAttribute)},a.prototype.minItemsClickHandler=function(e){var a=this,i=a.minObj,m=t(e.target);a.minimumItemValue=m.data("value"),i.val(a.format(a.minimumItemValue)),a.setMinimum(a.minimumItemValue),a.checkMaxValue(),a.disableMaxLowerValues(),a.setTargetValue(),"function"==typeof a.options.minimumCallback&&a.options.minimumCallback(a.minimumItemValue)},a.prototype.maxItemsClickHandler=function(e){var a=this,i=a.maxObj,m=t(e.target);m.hasClass("disabled")||(a.maximumItemValue=m.data("value"),i.val(a.format(a.maximumItemValue)),a.setMaximum(a.maximumItemValue),a.setTargetValue(),"function"==typeof a.options.maximumCallback&&a.options.maximumCallback(a.maximumItemValue))},a.prototype.setTargetValue=function(){var t=this,e="";(t.minimumItemValue>0||0===t.minimumItemValue)&&(t.maximumItemValue>0||0===t.maximumItemValue)?e=t.options.minHintText+" "+t.format(t.minimumItemValue)+" "+t.options.maxHintText+" "+t.format(t.maximumItemValue):t.minimumItemValue>0||0===t.minimumItemValue?e=t.options.minHintText+" "+t.format(t.minimumItemValue):(t.maximumItemValue>0||0===t.maximumItemValue)&&(e=t.options.maxHintText+" "+t.format(t.maximumItemValue)),t.target.val(e)},a.prototype.hideListItems=function(t){var e=this;switch(t){case"left":e.leftItemsObj.fadeOut();break;case"right":e.rightItemsObj.fadeOut()}},a.prototype.showListItems=function(t){var e=this;switch(t){case"left":e.leftItemsObj.fadeIn();break;case"right":e.rightItemsObj.fadeIn()}},a.prototype.setMinEvents=function(){var e=this,i=e.minObj;i.on("keydown",a.isNumber),i.on("keyup",t.proxy(e.minValueChanged,e))},a.prototype.setMaxEvents=function(){var e=this,i=e.maxObj;i.on("keydown",a.isNumber),i.on("keyup",t.proxy(e.maxValueChanged,e))},a.prototype.disableMaxLowerValues=function(){var e=this;e.popoverObj.find(".maximum-items li").each(function(a){var i=t(this);parseInt(i.data("value"))<parseInt(e.minimumItemValue)?i.addClass("disabled"):i.removeClass("disabled")})},a.prototype.minValueChanged=function(e){var a=this,i=t(e.target);a.minNewVal=i.val(),a.minNewVal&&a.minNewVal!=a.minOldVal?(a.minimumItemValue=a.minNewVal,a.minOldVal=a.minNewVal,a.setMinimum(a.minNewVal),a.disableMaxLowerValues(),a.options.minimumCallback(a.minNewVal),a.checkMaxValue(),a.setTargetValue()):a.minNewVal||(a.minOldVal=a.minNewVal="")},a.prototype.maxValueChanged=function(e){var a=this,i=t(e.target);a.maxNewVal=i.val(),parseInt(a.maxNewVal)<parseInt(a.getMinimum())?(a.removeMaximum(),a.maximumItemValue=void 0,a.setTargetValue()):a.maxNewVal&&a.maxNewVal!=a.maxOldVal?(a.maximumItemValue=a.maxNewVal,a.maxOldVal=a.maxOldVal,a.setMaximum(a.maxNewVal),a.options.maximumCallback(a.maxNewVal),a.setTargetValue()):a.maxNewVal||(a.maxOldVal=a.maxNewVal="")},t.fn.bootstrapRange=e,t.fn.bootstrapRange.Constructor=a}(jQuery);