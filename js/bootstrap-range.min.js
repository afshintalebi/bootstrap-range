/*
 *  jQuery bootstrap-range - v1.0.0
 *  A plugin which allows to select range of values from a list
 *
 *  Made by Afshin Talebi
 *  Under MIT License
 */
!function(a){"use strict";var b="aft-bootstrap-range";a.bootstrapRange={version:"1.0"},a.fn.bootstrapRange=function(c){var d=a.extend({cssClass:b,minValues:[],maxValues:[],minPlaceholder:"Minimum",maxPlaceholder:"Maximum",minAttribute:"data-minimum",maxAttribute:"data-maximum",minHintText:"from",maxHintText:"to",readonly:!0,format:!0,minimumCallback:function(a){},maximumCallback:function(a){}},c),e=function(a,b,c){if(d.format){var e="\\d(?=(\\d{"+(c||3)+"})+"+(b>0?"\\.":"$")+")";a=parseInt(a),a=a.toFixed(Math.max(0,~~b)).replace(new RegExp(e,"g"),"$&,")}return a},f=function(b){a.inArray(b.keyCode,[46,8,9,27,13,110,190])!==-1||65==b.keyCode&&(b.ctrlKey===!0||b.metaKey===!0)||67==b.keyCode&&(b.ctrlKey===!0||b.metaKey===!0)||88==b.keyCode&&(b.ctrlKey===!0||b.metaKey===!0)||b.keyCode>=35&&b.keyCode<=39||(b.shiftKey||b.keyCode<48||b.keyCode>57)&&(b.keyCode<96||b.keyCode>105)&&b.preventDefault()},g=function(a){return a.next(".popover").length>0};return Array.isArray(d.minValues)?Array.isArray(d.maxValues)?this.each(function(){var h,i,j,k,l,m,n,c=a(this),o="",p="",q="",r="",s=function(){j=c.next(".popover"),k=j.find(".input-container input.minimum"),l=j.find(".input-container input.maximum"),m=j.find(".left-column .list-items"),n=j.find(".right-column .list-items"),z()&&(h=z(),k.val(e(h))),w()&&(i=w(),l.val(e(i))),j.find(".minimum").focus(),j.find(".minimum-items > ul > li").on("click",I),j.find(".maximum-items > ul > li").on("click",J),k.on("focus",function(){t("left")}).on("blur",function(){u("left")}).trigger("focus"),l.on("focus",function(){t("right")}).on("blur",function(){u("right")}),C(),D(),H()},t=function(a){switch(a){case"left":m.fadeOut();break;case"right":n.fadeOut()}},u=function(a){switch(a){case"left":m.fadeIn();break;case"right":n.fadeIn()}},v=function(a){c.attr(d.maxAttribute,a)},w=function(){return c.attr(d.maxAttribute)},x=function(){c.removeAttr(d.maxAttribute)},y=function(a){c.attr(d.minAttribute,a)},z=function(){return c.attr(d.minAttribute)},A=function(b){p=a(this).val(),p&&p!=o?(h=p,o=p,y(p),H(),d.minimumCallback(p),F()):p||(o=p="")},B=function(b){r=a(this).val(),parseInt(r)<parseInt(z())?(x(),i=void 0,F()):r&&r!=q?(i=r,q=q,v(r),d.maximumCallback(r),F()):r||(q=r="")},C=function(){k.on("keydown",f),k.on("keyup",A)},D=function(){l.on("keydown",f),l.on("keyup",B)},E=function(){d.readonly&&c.attr("readonly","")},F=function(){var a="";h>=0&&i>=0?a=d.minHintText+" "+e(h)+" "+d.maxHintText+" "+e(i):h>=0?a=d.minHintText+" "+e(h):i>=0&&(a=d.maxHintText+" "+e(i)),c.val(a)},G=function(){var a=isNaN(i)?void 0:parseInt(i),b=parseInt(h);a>=0&&b>a&&(l.val(""),i=void 0,x())},H=function(){j.find(".maximum-items li").each(function(b){parseInt(a(this).data("value"))<parseInt(h)?a(this).addClass("disabled"):a(this).removeClass("disabled")})},I=function(){h=a(this).data("value"),k.val(e(h)),y(h),G(),H(),F(),"function"==typeof d.minimumCallback&&d.minimumCallback(h)},J=function(){a(this).hasClass("disabled")||(i=a(this).data("value"),l.val(e(i)),v(i),F(),"function"==typeof d.maximumCallback&&d.maximumCallback(i))};c.addClass(d.cssClass),E(),a(this).popover({html:!0,placement:"bottom",trigger:"manual",content:function(){var a="",b="";a+='<ul class="list-unstyled">';for(var c=0;c<d.minValues.length;c++)a+='<li data-value="'+d.minValues[c]+'">'+e(d.minValues[c])+"</li>";a+="</ul>",b+='<ul class="list-unstyled">';for(var c=0;c<d.maxValues.length;c++)b+='<li data-value="'+d.maxValues[c]+'">'+e(d.maxValues[c])+"</li>";return b+="</ul>",'<div class="bootstrap-range"><div class="right-column"><div class="input-container"><input type="text" name="minimum" class="minimum" placeholder="'+d.minPlaceholder+'"></div><div class="list-items minimum-items">'+a+'</div></div><div class="left-column"><div class="input-container"><input type="text" name="maximum" class="maximum" placeholder="'+d.maxPlaceholder+'"></div><div class="list-items maximum-items">'+b+"</div></div></div>"}}).on("shown.bs.popover",function(){s(),j.click(function(a){a.stopPropagation()})}),c.on("focus",function(d){d.stopPropagation(),g(c)||(a("."+b).not(c).popover("hide"),c.popover("show"))}),a(document).add("[data-toggle='dropdown']").click(function(c){a("."+b).popover("hide")}),c.click(function(a){a.stopPropagation()})}):void console.info("Maximum values isn't Array"):void console.info("Minimum values isn't Array")}}(jQuery);